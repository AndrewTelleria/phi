{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-blogpage{% endblock %}

{% block content %}
<div class="row">
	<div class="leftcolumn">
		<div class="card">
			<h1>{{ page.title }}</h1>
			<p>Author: {{ page.author }}</p>
			<p class="meta">Published: {{ page.date }}</p>

<!-- 			<div class="intro">{{ page.intro }}</div>	 -->		

			<p>{% include_block page.body %}</p>
				{% for item in page.gallery_images.all %}
					{% image item.image width-400 as photo %}
					<div class="blog-image" style="background-image: url({{ photo.url }})"></div>
					<p class="caption">{{ item.caption }}</p>
				{% endfor %}
			<p><a href="{{ page.get_parent.url }}">Return to blog</a></p>
		</div>
	</div>
	<div class="rightcolumn">
		<div class="card">
			{% with page.main_image as main_image %}
	            {% if main_image %}{% image main_image fill-500x500 as photo %}
		            <div class="right-blog-image" style="background-image: url({{ photo.url }})"></div>
		            <p class="caption">{{ main_image.caption }}</p>
	            {% endif %}
	        {% endwith %}
			<p>{{ page.intro }}</p>
			{% if page.tags.all.count %}
				<div class="tags">
					<h3>Tags</h3>
					{% for tag in page.tags.all %}
						<a href="{% slugurl 'tags' %}?tag={{ tag }}"><button type="button">{{ tag }}</button></a>
					{% endfor %}
				</div>
			{% endif %}
			{% with categories=page.categories.all %}
				{% if categories %}
					<h3>Posted in:</h3>
					<ul>
						{% for category in categories %}
							<li>
								{% image category.icon fill-32x32 style="vertical-align: middle" %}
								{{ category.name }}
							</li>
						{% endfor %}
					</ul>
				{% endif %}
			{% endwith %}
		</div>
</div>

{% endblock %}